<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Pain Scale Table</title>
  <style>
    :root{font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;}
    body{margin:10px;background:#fff;color:#000000}
    .container{max-width:668px;margin:0 auto;background:transparent;padding:12px;border-radius:8px;box-shadow:none}
    h1{font-size:1rem;margin:0 0 8px}
    p.lead{margin:0 0 12px;color:#000000;font-size:0.9rem}
    table{width:100%;border-collapse:separate;border-spacing:0 2px;font-size:0.85rem;table-layout:fixed}
    th,td{border:1px solid transparent;padding:1px 2px;text-align:center;vertical-align:middle}
    th:first-child, td:first-child{text-align:center}
    th{white-space:normal;word-break:break-word}
    th:nth-child(1), td:nth-child(1){width:30%}
    th:nth-child(2), td:nth-child(2){width:15.5%}
    th:nth-child(3), td:nth-child(3){width:15.5%}
    th:nth-child(4), td:nth-child(4){width:15.5%}
    th:nth-child(5), td:nth-child(5){width:15.5%}
    th:nth-child(6), td:nth-child(6){width:8%}
    input[type="text"]{
      width:100%;
      box-sizing:border-box;
      padding:2px;
      border-radius:3px;
      border:1px solid #d6e6f6;
      font-size:0.85rem;
      display:block;
      margin:0 auto;
      text-align:center;
    }
    .area-cell{display:flex; flex-direction:column; gap:2px; align-items:stretch}
    .area-select{width:100%; padding:2px; border-radius:3px; border:1px solid #d6e6f6; font-size:0.85rem; background:#fff}
    .area-other{width:100%;}
    input[type="number"]{width:40px;padding:2px;border-radius:3px;border:1px solid #d6e6f6;font-size:0.85rem}
    select.pain-select{width:60px;padding:1px 2px;border-radius:3px;border:1px solid #d6e6f6;font-size:0.85rem;background:#fff}
    .add-row{margin-top:8px;font-size:0.85rem;padding:6px 10px}
    button{padding:6px 10px;border-radius:6px;border:0;background:#1c75bc;color:#fff;cursor:pointer;font-size:0.85rem}
    .delete-row {
    background: #dc3545;
    color: #fff;
    border: none;
    border-radius: 4px;
    padding: 5px 5px;
    font-size: 0.8rem;
    cursor: pointer;
    display: block;
    margin: 0 auto;        /* centers inside the cell */
  }

    @media (max-width:480px){
      input[type="text"]{width:100%}
      input[type="number"]{width:30px}
      select.pain-select{width:48px}
      table, th, td{font-size:0.75rem;padding:4px}
    }
  </style>
</head>
<body>
  <div class="container">
    <p class="lead"><i>(0 = no pain, 10 = worst pain possible)</i></p>

    <form id="pain-form">
      <table id="pain-table">
        <thead>
          <tr>
            <th>Area of Body</th>
            <th>Good Day</th>
            <th>Normal Day</th>
            <th>Bad Day</th>
            <th>Today</th>
            <th></th>
          </tr>
        </thead>
        <tbody id="rows">
          <tr>
            <td>
              <div class="area-cell">
                <select name="area_1_select" class="area-select">
                  <option value="" selected disabled>-- Select --</option>
                  <option value="Head">Head</option>
                  <option value="Face">Face</option>
                  <option value="Neck">Neck</option>
                  <option value="Back">Back</option>
                  <option value="Left arm">Left arm</option>
                  <option value="Right arm">Right arm</option>
                  <option value="Left shoulder">Left shoulder</option>
                  <option value="Right shoulder">Right shoulder</option>
                  <option value="Left elbow">Left elbow</option>
                  <option value="Right elbow">Right elbow</option>
                  <option value="Left wrist">Left wrist</option>
                  <option value="Right wrist">Right wrist</option>
                  <option value="Left hand">Left hand</option>
                  <option value="Right hand">Right hand</option>
                  <option value="Left thumb">Left thumb</option>
                  <option value="Right thumb">Right thumb</option>
                  <option value="Left index finger">Left index finger</option>
                  <option value="Right index finger">Right index finger</option>
                  <option value="Left middle finger">Left middle finger</option>
                  <option value="Right middle finger">Right middle finger</option>
                  <option value="Left ring finger">Left ring finger</option>
                  <option value="Right ring finger">Right ring finger</option>
                  <option value="Left little finger">Left little finger</option>
                  <option value="Right little finger">Right little finger</option>
                  <option value="Left hip or pelvis">Left hip or pelvis</option>
                  <option value="Right hip or pelvis">Right hip or pelvis</option>
                  <option value="Left upper leg">Left upper leg</option>
                  <option value="Right upper leg">Right upper leg</option>
                  <option value="Left Knee">Left Knee</option>
                  <option value="Right Knee">Right Knee</option>
                  <option value="Left lower leg">Left lower leg</option>
                  <option value="Right lower leg">Right lower leg</option>
                  <option value="Left ankle">Left ankle</option>
                  <option value="Right ankle">Right ankle</option>
                  <option value="Left foot">Left foot</option>
                  <option value="Right foot">Right foot</option>
                  <option value="Other">Other</option>
                </select>
                <input type="text" name="area_1_other" class="area-other" placeholder="Please enter area of body" style="display:none;">
                <input type="hidden" name="area_1" value="">
              </div>
            </td>
            <td>
              <select name="good_1" class="pain-select">
                <option value="" selected disabled>--</option>
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
              </select>
            </td>
            <td>
              <select name="normal_1" class="pain-select">
                <option value="" selected disabled>--</option>
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
              </select>
            </td>
            <td>
              <select name="bad_1" class="pain-select">
                <option value="" selected disabled>--</option>
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
              </select>
            </td>
            <td>
              <select name="today_1" class="pain-select">
                <option value="" selected disabled>--</option>
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
              </select>
            </td>
            <td>
              <button type="button" class="delete-row" aria-label="Delete row">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>

      <button type="button" class="add-row" id="add-row">+ Add New Area</button>
    </form>
  </div>

  <script>
    let rowCount = 1;

    function painSelectHtml(name){
      let opts = '<option value="" selected disabled>--</option>';
      for (let i = 0; i <= 10; i++) {
        opts += `<option value="${i}">${i}</option>`;
      }
      return `<select name="${name}" class="pain-select">${opts}</select>`;
    }

    const AREAS = [
      'Head','Face','Neck','Back','Left arm','Right arm','Left shoulder','Right shoulder',
      'Left elbow','Right elbow','Left wrist','Right wrist','Left hand','Right hand','Left thumb','Right thumb',
      'Left index finger','Right index finger','Left middle finger','Right middle finger','Left ring finger','Right ring finger',
      'Left little finger','Right little finger','Left hip or pelvis','Right hip or pelvis','Left upper leg','Right upper leg',
      'Left Knee','Right Knee','Left lower leg','Right lower leg','Left ankle','Right ankle','Left foot','Right foot','Other'
    ];

    function areaOptionsHtml(){
      let opts = '<option value="" selected disabled>-- Select --</option>';
      for (const a of AREAS){ opts += `<option value="${a}">${a}</option>`; }
      return opts;
    }

    function areaSelectHtml(index){
      return `
        <div class="area-cell">
          <select name="area_${index}_select" class="area-select">${areaOptionsHtml()}</select>
          <input type="text" name="area_${index}_other" class="area-other" placeholder="Please enter area of body" style="display:none;">
          <input type="hidden" name="area_${index}" value="">
        </div>
      `;
    }

    function autosave(e){
      const data = new FormData(document.getElementById('pain-form'));
      const result = {};
      for (const [k,v] of data.entries()){ result[k] = v; }
      console.log('Autosave:', result); // replace with actual save logic
    }

    document.getElementById('rows').addEventListener('input', autosave);
    document.getElementById('rows').addEventListener('change', autosave);

    // Show/hide Other field and keep a single area_* value
    document.getElementById('rows').addEventListener('change', function(e){
      if (e.target.matches('select.area-select')){
        const td = e.target.closest('td');
        const m = e.target.name.match(/area_(\d+)_select/);
        if (!m) return;
        const idx = m[1];
        const other = td.querySelector(`input[name="area_${idx}_other"]`);
        const hidden = td.querySelector(`input[name="area_${idx}"]`);
        if (e.target.value === 'Other'){
          other.style.display = '';
          hidden.value = other.value.trim();
          other.focus();
        } else {
          other.style.display = 'none';
          hidden.value = e.target.value;
        }
        autosave();
      }
    });

    document.getElementById('rows').addEventListener('input', function(e){
      if (e.target.matches('input.area-other')){
        const td = e.target.closest('td');
        const m = e.target.name.match(/area_(\d+)_other/);
        if (!m) return;
        const idx = m[1];
        const sel = td.querySelector(`select[name="area_${idx}_select"]`);
        const hidden = td.querySelector(`input[name="area_${idx}"]`);
        if (sel && sel.value === 'Other'){
          hidden.value = e.target.value.trim();
          autosave();
        }
      }
    });

    document.getElementById('add-row').addEventListener('click', function(){
      rowCount++;
      const tbody = document.getElementById('rows');
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${areaSelectHtml(rowCount)}</td>
        <td>${painSelectHtml(`good_${rowCount}`)}</td>
        <td>${painSelectHtml(`normal_${rowCount}`)}</td>
        <td>${painSelectHtml(`bad_${rowCount}`)}</td>
        <td>${painSelectHtml(`today_${rowCount}`)}</td>
        <td><button type="button" class="delete-row" aria-label="Delete row">Delete</button></td>
      `;
      tbody.appendChild(tr);
    });

    // Delegate delete row action
    document.getElementById('rows').addEventListener('click', function(e){
      if (e.target && e.target.classList.contains('delete-row')){
        const tr = e.target.closest('tr');
        if (tr){
          tr.remove();
          autosave();
        }
      }
    });
  </script>
</body>
</html>
